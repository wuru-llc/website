<script>
  let ticking = false;

  function handleScroll() {
    if (!ticking) {
      window.requestAnimationFrame(() => {
        const backgrounds = document.querySelectorAll(".parallax");

        backgrounds.forEach((background) => {
          if (background instanceof HTMLElement) {
            const rect = background.getBoundingClientRect();
            const offsetTop = rect.top;

            // Movimiento m치s suave y controlado
            background.style.transform = `translateY(${-offsetTop * 0.2}px)`; // Velocidad m치s baja
          }
        });

        ticking = false; // Resetea el estado para el pr칩ximo frame
      });

      ticking = true;
    }
  }

  function initScrollEffect() {
    window.addEventListener("scroll", handleScroll);
    handleScroll(); // Aplica el efecto al cargar la p치gina
  }

  document.addEventListener("astro:page-load", initScrollEffect);
  initScrollEffect();
</script>

<div class="parallax">
  <slot />
</div>

<style>
  .parallax {
    width: 100%;
    position: relative; /* Cambiado a relative */
    will-change: transform; /* Mejora el rendimiento */
    transition: transform 0.1s ease-out; /* Suaviza el movimiento */
  }
</style>
